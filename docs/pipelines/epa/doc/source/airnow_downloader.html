
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Downloader for AirNow &#8212; NSAPH EPA Pipelines 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_paramlinks.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Internal scripts used for download tasks" href="aqs_tools.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-airnow_downloader">
<span id="downloader-for-airnow"></span><h1>Downloader for AirNow<a class="headerlink" href="#module-airnow_downloader" title="Permalink to this headline">¶</a></h1>
<p>Toolkit and API for downloading AirNow</p>
<dl class="py class">
<dt class="sig sig-object py" id="airnow_downloader.AirNowDownloader">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">AirNowDownloader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/airnow_downloader.html#AirNowDownloader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#airnow_downloader.AirNowDownloader" title="Permalink to this definition">¶</a></dt>
<dd><p>Main downloader class</p>
<p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="airnow_downloader.AirNowDownloader.params.target"></span><strong>target</strong><a class="paramlink headerlink reference internal" href="#airnow_downloader.AirNowDownloader.params.target">¶</a> – File name, where downloaded data is saved.
If file name includes substring “.json”, then the data is saved in
JSON format, otherwise it is saved as CSV. If target is not
specified (None), then teh data is not saved to file but is
returned to the caller. The latter mode is useful for testing.</p></li>
<li><p><span class="target" id="airnow_downloader.AirNowDownloader.params.parameter"></span><strong>parameter</strong><a class="paramlink headerlink reference internal" href="#airnow_downloader.AirNowDownloader.params.parameter">¶</a> – <p>Comma-separated list of parameters to download.
In practice because of AirNow API limitations, if more than
one parameter is specified, a runtime error will occur.
Possible values:</p>
<blockquote>
<div><ul>
<li><p>Ozone (O3, ozone)</p></li>
<li><p>PM2.5 (pm25)</p></li>
<li><p>PM10 (pm10)</p></li>
<li><p>CO (co)</p></li>
<li><p>NO2 (no2)</p></li>
<li><p>SO2 (so2)</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><span class="target" id="airnow_downloader.AirNowDownloader.params.api_key"></span><strong>api_key</strong><a class="paramlink headerlink reference internal" href="#airnow_downloader.AirNowDownloader.params.api_key">¶</a> – Optional API Key to use with AirNow api. If not
specified, then it is searched in a file named <cite>.airnow.yaml</cite>
or <cite>.airnow.json</cite> first in working directory and then in user’s
home directory</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="airnow_downloader.AirNowDownloader.download">
<span class="sig-name descname"><span class="pre">download</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requested_date</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/airnow_downloader.html#AirNowDownloader.download"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#airnow_downloader.AirNowDownloader.download" title="Permalink to this definition">¶</a></dt>
<dd><p>Download data for a date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="airnow_downloader.AirNowDownloader.download.params.requested_date"></span><strong>requested_date</strong><a class="paramlink headerlink reference internal" href="#airnow_downloader.AirNowDownloader.download.params.requested_date">¶</a> – date to be downloaded</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If target has been specified, then this method returns
the target file name, otherwise it returns a list of dictionaries
where each dictionary is structured as JSON, with column names
serving as keys</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="airnow_downloader.AirNowDownloader.dump_csv">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">dump_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/airnow_downloader.html#AirNowDownloader.dump_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#airnow_downloader.AirNowDownloader.dump_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal method used by download
Dumps rows as CSV file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="airnow_downloader.AirNowDownloader.write_csv_header">
<span class="sig-name descname"><span class="pre">write_csv_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/airnow_downloader.html#AirNowDownloader.write_csv_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#airnow_downloader.AirNowDownloader.write_csv_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal method used by download
Writes CSV file ehader</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="airnow_downloader.AirNowDownloader.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/airnow_downloader.html#AirNowDownloader.process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#airnow_downloader.AirNowDownloader.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal method</p>
<p>Aggregates hourly data into day’s averages and joins with geographic
information such as state, county, zip code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><span class="target" id="airnow_downloader.AirNowDownloader.process.params.content"></span><strong>content</strong><a class="paramlink headerlink reference internal" href="#airnow_downloader.AirNowDownloader.process.params.content">¶</a> – Raw content received from AirNow API call
see: <a class="reference external" href="https://docs.airnowapi.org/Data/docs">https://docs.airnowapi.org/Data/docs</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of dictinaries, where each row is represented as a
dictionary, with column names serving as keys</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="airnow_downloader.AirNowDownloader.download_range">
<span class="sig-name descname"><span class="pre">download_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">datetime.date(2021,</span> <span class="pre">11,</span> <span class="pre">2)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/airnow_downloader.html#AirNowDownloader.download_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#airnow_downloader.AirNowDownloader.download_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads data for a range of dates. To invoke this method the
application must have specified a target file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="airnow_downloader.AirNowDownloader.download_range.params.start_date"></span><strong>start_date</strong><a class="paramlink headerlink reference internal" href="#airnow_downloader.AirNowDownloader.download_range.params.start_date">¶</a> – First date in the range to download (inclusive)</p></li>
<li><p><span class="target" id="airnow_downloader.AirNowDownloader.download_range.params.end_date"></span><strong>end_date</strong><a class="paramlink headerlink reference internal" href="#airnow_downloader.AirNowDownloader.download_range.params.end_date">¶</a> – Last date in the range to download (inclusive)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">NSAPH EPA Pipelines</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usage.html">EPA AQS Toolkit Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="aqs.html">Main Class for EPA AQS Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="aqs_ds_def.html">Configuration Object for EPA AQS Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="airnow.html">Main Class for EPA AirNow Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="airnow_ds_def.html">Configuration Object for EPA AirNow Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="aqs_tools.html">Internal scripts used for download tasks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Downloader for AirNow</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="aqs_tools.html" title="previous chapter">Internal scripts used for download tasks</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Harvard University.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/doc/source/airnow_downloader.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>