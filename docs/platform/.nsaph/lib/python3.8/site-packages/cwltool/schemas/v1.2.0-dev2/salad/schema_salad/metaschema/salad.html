
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Semantic Annotations for Linked Avro Data (SALAD) &#8212; NSAPH Data Platform 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../_static/sphinx_paramlinks.css" />
    <script data-url_root="../../../../../../../../../../" id="documentation_options" src="../../../../../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../../../../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="semantic-annotations-for-linked-avro-data-salad">
<h1>Semantic Annotations for Linked Avro Data (SALAD)<a class="headerlink" href="#semantic-annotations-for-linked-avro-data-salad" title="Permalink to this headline">¶</a></h1>
<p>Author:</p>
<ul class="simple">
<li><p>Peter Amstutz <a class="reference external" href="mailto:peter&#46;amstutz&#37;&#52;&#48;curii&#46;com">peter<span>&#46;</span>amstutz<span>&#64;</span>curii<span>&#46;</span>com</a>, Arvados Project, Curii Corporation</p></li>
</ul>
<p>Contributors:</p>
<ul class="simple">
<li><p>The developers of Apache Avro</p></li>
<li><p>The developers of JSON-LD</p></li>
<li><p>Nebojša Tijanić <a class="reference external" href="mailto:nebojsa&#46;tijanic&#37;&#52;&#48;sbgenomics&#46;com">nebojsa<span>&#46;</span>tijanic<span>&#64;</span>sbgenomics<span>&#46;</span>com</a>, Seven Bridges Genomics</p></li>
</ul>
</div>
<div class="section" id="abstract">
<h1>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h1>
<p>Salad is a schema language for describing structured linked data documents
in JSON or YAML documents.  A Salad schema provides rules for
preprocessing, structural validation, and link checking for documents
described by a Salad schema.  Salad builds on JSON-LD and the Apache Avro
data serialization system, and extends Avro with features for rich data
modeling such as inheritance, template specialization, object identifiers,
and object references.  Salad was developed to provide a bridge between the
record oriented data modeling supported by Apache Avro and the Semantic
Web.</p>
</div>
<div class="section" id="status-of-this-document">
<h1>Status of This Document<a class="headerlink" href="#status-of-this-document" title="Permalink to this headline">¶</a></h1>
<p>This document is the product of the <a class="reference external" href="https://groups.google.com/forum/#%21forum/common-workflow-language">Common Workflow Language working
group</a>.  The
latest version of this document is available in the “schema_salad” repository at</p>
<p>https://github.com/common-workflow-language/schema_salad</p>
<p>The products of the CWL working group (including this document) are made available
under the terms of the Apache License, version 2.0.</p>
<!--ToC--></div>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>The JSON data model is an extremely popular way to represent structured
data.  It is attractive because of its relative simplicity and is a
natural fit with the standard types of many programming languages.
However, this simplicity means that basic JSON lacks expressive features
useful for working with complex data structures and document formats, such
as schemas, object references, and namespaces.</p>
<p>JSON-LD is a W3C standard providing a way to describe how to interpret a
JSON document as Linked Data by means of a “context”.  JSON-LD provides a
powerful solution for representing object references and namespaces in JSON
based on standard web URIs, but is not itself a schema language.  Without a
schema providing a well defined structure, it is difficult to process an
arbitrary JSON-LD document as idiomatic JSON because there are many ways to
express the same data that are logically equivalent but structurally
distinct.</p>
<p>Several schema languages exist for describing and validating JSON data,
such as the Apache Avro data serialization system, however none understand
linked data.  As a result, to fully take advantage of JSON-LD to build the
next generation of linked data applications, one must maintain separate
JSON schema, JSON-LD context, RDF schema, and human documentation, despite
significant overlap of content and obvious need for these documents to stay
synchronized.</p>
<p>Schema Salad is designed to address this gap.  It provides a schema
language and processing rules for describing structured JSON content
permitting URI resolution and strict document validation.  The schema
language supports linked data through annotations that describe the linked
data interpretation of the content, enables generation of JSON-LD context
and RDF schema, and production of RDF triples by applying the JSON-LD
context.  The schema language also provides for robust support of inline
documentation.</p>
<div class="section" id="introduction-to-v1-1">
<h2>Introduction to v1.1<a class="headerlink" href="#introduction-to-v1-1" title="Permalink to this headline">¶</a></h2>
<p>This is the third version of of the Schema Salad specification.  It is
developed concurrently with v1.1 of the Common Workflow Language for use in
specifying the Common Workflow Language, however Schema Salad is intended to be
useful to a broader audience.  Compared to the v1.0 schema salad
specification, the following changes have been made:</p>
<ul class="simple">
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">default</span></code> values on record fields to specify default values</p></li>
<li><p>Add subscoped fields (fields which introduce a new inner scope for identifiers)</p></li>
<li><p>Add the <em>inVocab</em> flag (default true) to indicate if a type is added to the vocabulary of well known terms or must be prefixed</p></li>
<li><p>Add <em>secondaryFilesDSL</em> micro DSL (domain specific language) to convert text strings to a secondaryFiles record type used in CWL</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">$mixin</span></code> feature has been removed from the specification, as it
is poorly documented, not included in conformance testing,
and not widely supported.</p></li>
</ul>
</div>
<div class="section" id="references-to-other-specifications">
<h2>References to Other Specifications<a class="headerlink" href="#references-to-other-specifications" title="Permalink to this headline">¶</a></h2>
<p><strong>Javascript Object Notation (JSON)</strong>: http://json.org</p>
<p><strong>JSON Linked Data (JSON-LD)</strong>: http://json-ld.org</p>
<p><strong>YAML</strong>: https://yaml.org/spec/1.2/spec.html</p>
<p><strong>Avro</strong>: https://avro.apache.org/docs/current/spec.html</p>
<p><strong>Uniform Resource Identifier (URI) Generic Syntax</strong>: https://tools.ietf.org/html/rfc3986)</p>
<p><strong>Resource Description Framework (RDF)</strong>: http://www.w3.org/RDF/</p>
<p><strong>UTF-8</strong>: https://www.ietf.org/rfc/rfc2279.txt)</p>
</div>
<div class="section" id="scope">
<h2>Scope<a class="headerlink" href="#scope" title="Permalink to this headline">¶</a></h2>
<p>This document describes the syntax, data model, algorithms, and schema
language for working with Salad documents.  It is not intended to document
a specific implementation of Salad, however it may serve as a reference for
the behavior of conforming implementations.</p>
</div>
<div class="section" id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h2>
<p>The terminology used to describe Salad documents is defined in the Concepts
section of the specification. The terms defined in the following list are
used in building those definitions and in describing the actions of an
Salad implementation:</p>
<p><strong>may</strong>: Conforming Salad documents and Salad implementations are permitted but
not required to be interpreted as described.</p>
<p><strong>must</strong>: Conforming Salad documents and Salad implementations are required
to be interpreted as described; otherwise they are in error.</p>
<p><strong>error</strong>: A violation of the rules of this specification; results are
undefined. Conforming implementations may detect and report an error and may
recover from it.</p>
<p><strong>fatal error</strong>: A violation of the rules of this specification; results
are undefined. Conforming implementations must not continue to process the
document and may report an error.</p>
<p><strong>at user option</strong>: Conforming software may or must (depending on the modal verb in
the sentence) behave as described; if it does, it must provide users a means to
enable or disable the behavior described.</p>
</div>
</div>
<div class="section" id="document-model">
<h1>Document model<a class="headerlink" href="#document-model" title="Permalink to this headline">¶</a></h1>
<div class="section" id="data-concepts">
<h2>Data concepts<a class="headerlink" href="#data-concepts" title="Permalink to this headline">¶</a></h2>
<p>An <strong>object</strong> is a data structure equivalent to the “object” type in JSON,
consisting of a unordered set of name/value pairs (referred to here as
<strong>fields</strong>) and where the name is a string and the value is a string, number,
boolean, array, or object.</p>
<p>A <strong>document</strong> is a file containing a serialized object, or an array of
objects.</p>
<p>A <strong>document type</strong> is a class of files that share a common structure and
semantics.</p>
<p>A <strong>document schema</strong> is a formal description of the grammar of a document type.</p>
<p>A <strong>base URI</strong> is a context-dependent URI used to resolve relative references.</p>
<p>An <strong>identifier</strong> is a URI that designates a single document or single
object within a document.</p>
<p>A <strong>vocabulary</strong> is the set of symbolic field names and enumerated symbols defined
by a document schema, where each term maps to absolute URI.</p>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p>Conforming Salad v1.1 documents are serialized and loaded using a
subset of YAML 1.2 syntax and UTF-8 text encoding.  Salad documents
are written using the <a class="reference external" href="https://yaml.org/spec/1.2/spec.html#id2803231">JSON-compatible subset of YAML described in
section 10.2</a>.  The
following features of YAML must not be used in conforming Salad
documents:</p>
<ul class="simple">
<li><p>Use of explicit node tags with leading <code class="docutils literal notranslate"><span class="pre">!</span></code> or <code class="docutils literal notranslate"><span class="pre">!!</span></code></p></li>
<li><p>Use of anchors with leading <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> and aliases with leading <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
<li><p>%YAML directives</p></li>
<li><p>%TAG directives</p></li>
</ul>
<p>It is a fatal error if the document is not valid YAML.</p>
<p>A Salad document must consist only of either a single root object or an
array of objects.</p>
</div>
<div class="section" id="document-context">
<h2>Document context<a class="headerlink" href="#document-context" title="Permalink to this headline">¶</a></h2>
<div class="section" id="implied-context">
<h3>Implied context<a class="headerlink" href="#implied-context" title="Permalink to this headline">¶</a></h3>
<p>The implicit context consists of the vocabulary defined by the schema and
the base URI.  By default, the base URI must be the URI that was used to
load the document.  It may be overridden by an explicit context.</p>
</div>
<div class="section" id="explicit-context">
<h3>Explicit context<a class="headerlink" href="#explicit-context" title="Permalink to this headline">¶</a></h3>
<p>If a document consists of a root object, this object may contain the
fields <code class="docutils literal notranslate"><span class="pre">$base</span></code>, <code class="docutils literal notranslate"><span class="pre">$namespaces</span></code>, <code class="docutils literal notranslate"><span class="pre">$schemas</span></code>, and <code class="docutils literal notranslate"><span class="pre">$graph</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$base</span></code>: Must be a string.  Set the base URI for the document used to
resolve relative references.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$namespaces</span></code>: Must be an object with strings as values.  The keys of
the object are namespace prefixes used in the document; the values of
the object are the prefix expansions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$schemas</span></code>: Must be an array of strings.  This field may list URI
references to documents in RDF-XML format which will be queried for RDF
schema data.  The subjects and predicates described by the RDF schema
may provide additional semantic context for the document, and may be
used for validation of prefixed extension fields found in the document.</p></li>
</ul>
<p>Other directives beginning with <code class="docutils literal notranslate"><span class="pre">$</span></code> must be ignored.</p>
</div>
</div>
<div class="section" id="document-graph">
<h2>Document graph<a class="headerlink" href="#document-graph" title="Permalink to this headline">¶</a></h2>
<p>If a document consists of a single root object, this object may contain the
field <code class="docutils literal notranslate"><span class="pre">$graph</span></code>.  This field must be an array of objects.  If present, this
field holds the primary content of the document.  A document that consists
of array of objects at the root is an implicit graph.</p>
</div>
<div class="section" id="document-metadata">
<h2>Document metadata<a class="headerlink" href="#document-metadata" title="Permalink to this headline">¶</a></h2>
<p>If a document consists of a single root object, metadata about the
document, such as authorship, may be declared in the root object.</p>
</div>
<div class="section" id="document-schema">
<h2>Document schema<a class="headerlink" href="#document-schema" title="Permalink to this headline">¶</a></h2>
<p>Document preprocessing, link validation and schema validation require a
document schema.  A schema may consist of:</p>
<ul class="simple">
<li><p>At least one record definition object which defines valid fields that
make up a record type.  Record field definitions include the valid types
that may be assigned to each field and annotations to indicate fields
that represent identifiers and links, described below in “Semantic
Annotations”.</p></li>
<li><p>Any number of enumerated type objects which define a set of finite set of symbols that are
valid value of the type.</p></li>
<li><p>Any number of documentation objects which allow in-line documentation of the schema.</p></li>
</ul>
<p>The schema for defining a salad schema (the metaschema) is described in
detail in the <a class="reference external" href="#Schema">Schema</a> section.</p>
</div>
<div class="section" id="record-field-annotations">
<h2>Record field annotations<a class="headerlink" href="#record-field-annotations" title="Permalink to this headline">¶</a></h2>
<p>In a document schema, record field definitions may include the field
<code class="docutils literal notranslate"><span class="pre">jsonldPredicate</span></code>, which may be either a string or object.  Implementations
must use the following document preprocessing of fields by the following
rules:</p>
<ul class="simple">
<li><p>If the value of <code class="docutils literal notranslate"><span class="pre">jsonldPredicate</span></code> is <code class="docutils literal notranslate"><span class="pre">&#64;id</span></code>, the field is an identifier
field.</p></li>
<li><p>If the value of <code class="docutils literal notranslate"><span class="pre">jsonldPredicate</span></code> is an object, and contains that
object contains the field <code class="docutils literal notranslate"><span class="pre">_type</span></code> with the value <code class="docutils literal notranslate"><span class="pre">&#64;id</span></code>, the field is a
link field subject to <a class="reference external" href="#Link_validation">link validation</a>.</p></li>
<li><p>If the value of <code class="docutils literal notranslate"><span class="pre">jsonldPredicate</span></code> is an object which contains the
field <code class="docutils literal notranslate"><span class="pre">_type</span></code> with the value <code class="docutils literal notranslate"><span class="pre">&#64;vocab</span></code>, the field value is subject to
<a class="reference external" href="#Vocabulary_resolution">vocabulary resolution</a>.</p></li>
</ul>
</div>
<div class="section" id="document-traversal">
<h2>Document traversal<a class="headerlink" href="#document-traversal" title="Permalink to this headline">¶</a></h2>
<p>To perform document document preprocessing, link validation and schema
validation, the document must be traversed starting from the fields or
array items of the root object or array and recursively visiting each child
item which contains an object or arrays.</p>
</div>
<div class="section" id="short-names">
<h2>Short names<a class="headerlink" href="#short-names" title="Permalink to this headline">¶</a></h2>
<p>The “short name” of an fully qualified identifier is the portion of
the identifier following the final slash <code class="docutils literal notranslate"><span class="pre">/</span></code> of either the fragment
identifier following <code class="docutils literal notranslate"><span class="pre">#</span></code> or the path portion, if there is no fragment.
Some examples:</p>
<ul class="simple">
<li><p>the short name of <code class="docutils literal notranslate"><span class="pre">http://example.com/foo</span></code> is <code class="docutils literal notranslate"><span class="pre">foo</span></code></p></li>
<li><p>the short name of <code class="docutils literal notranslate"><span class="pre">http://example.com/#bar</span></code> is <code class="docutils literal notranslate"><span class="pre">bar</span></code></p></li>
<li><p>the short name of <code class="docutils literal notranslate"><span class="pre">http://example.com/foo/bar</span></code> is <code class="docutils literal notranslate"><span class="pre">bar</span></code></p></li>
<li><p>the short name of <code class="docutils literal notranslate"><span class="pre">http://example.com/foo#bar</span></code> is <code class="docutils literal notranslate"><span class="pre">bar</span></code></p></li>
<li><p>the short name of <code class="docutils literal notranslate"><span class="pre">http://example.com/#foo/bar</span></code> is <code class="docutils literal notranslate"><span class="pre">bar</span></code></p></li>
<li><p>the short name of <code class="docutils literal notranslate"><span class="pre">http://example.com/foo#bar/baz</span></code> is <code class="docutils literal notranslate"><span class="pre">baz</span></code></p></li>
</ul>
</div>
<div class="section" id="inheritance-and-specialization">
<h2>Inheritance and specialization<a class="headerlink" href="#inheritance-and-specialization" title="Permalink to this headline">¶</a></h2>
<p>A record definition may inherit from one or more record definitions
with the <code class="docutils literal notranslate"><span class="pre">extends</span></code> field.  This copies the fields defined in the
parent record(s) as the base for the new record.  A record definition
may <code class="docutils literal notranslate"><span class="pre">specialize</span></code> type declarations of the fields inherited from the
base record.  For each field inherited from the base record, any
instance of the type in <code class="docutils literal notranslate"><span class="pre">specializeFrom</span></code> is replaced with the type in
<code class="docutils literal notranslate"><span class="pre">specializeTo</span></code>.  The type in <code class="docutils literal notranslate"><span class="pre">specializeTo</span></code> should extend from the
type in <code class="docutils literal notranslate"><span class="pre">specializeFrom</span></code>.</p>
<p>A record definition may be <code class="docutils literal notranslate"><span class="pre">abstract</span></code>.  This means the record
definition is not used for validation on its own, but may be extended
by other definitions.  If an abstract type appears in a field
definition, it is logically replaced with a union of all concrete
subtypes of the abstract type.  In other words, the field value does
not validate as the abstract type, but must validate as some concrete
type that inherits from the abstract type.</p>
</div>
</div>
<div class="section" id="document-preprocessing">
<h1>Document preprocessing<a class="headerlink" href="#document-preprocessing" title="Permalink to this headline">¶</a></h1>
<p>After processing the explicit context (if any), document preprocessing
begins.  Starting from the document root, object fields values or array
items which contain objects or arrays are recursively traversed
depth-first.  For each visited object, field names, identifier fields, link
fields, vocabulary fields, and <code class="docutils literal notranslate"><span class="pre">$import</span></code> and <code class="docutils literal notranslate"><span class="pre">$include</span></code> directives must be
processed as described in this section.  The order of traversal of child
nodes within a parent node is undefined.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../../../../../../../index.html">NSAPH Data Platform</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../README.html">NSAPH Data Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../doc/Datamodels.html">Data Modelling for NSAPH Data Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../../../doc/Medicaid.html">Handling Medicaid data</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../../../../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Harvard University.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../../../../../../../../_sources/.nsaph/lib/python3.8/site-packages/cwltool/schemas/v1.2.0-dev2/salad/schema_salad/metaschema/salad.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>