<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NSAPH Data Platform: Documentation Home &mdash; NSAPH Data Platform 0.0.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/sphinx_paramlinks.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/nsaph.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Why Data Platform and what does it do?" href="rationale.html" />
    <link rel="prev" title="NSAPH Data Platform" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> NSAPH Data Platform
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction-to-data-platform">Introduction to Data Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-blocks">Building Blocks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nsaph-utilities">NSAPH Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#core-platform">Core Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gis-utilities">GIS Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pipelines">Pipelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#deployment">Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-database">Using the Database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#terms-and-acronyms">Terms and Acronyms</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-platform-documentation">Building Platform documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rationale.html">What is Data Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="domains.html">Data Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">Data Processing Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="packages.html">Python Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="guts.html">Data Platform Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_data.html">Adding more data</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Terms and Acronyms</a></li>
<li class="toctree-l1"><a class="reference internal" href="docindices.html">Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NSAPH Data Platform</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>NSAPH Data Platform: Documentation Home</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/home.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="nsaph-data-platform-documentation-home">
<h1>NSAPH Data Platform: Documentation Home<a class="headerlink" href="#nsaph-data-platform-documentation-home" title="Permalink to this heading"></a></h1>
<p><strong>User and Development Documentation</strong></p>
<p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction-to-data-platform" id="id1">Introduction to Data Platform</a></p></li>
<li><p><a class="reference internal" href="#building-blocks" id="id2">Building Blocks</a></p>
<ul>
<li><p><a class="reference internal" href="#nsaph-utilities" id="id3">NSAPH Utilities</a></p></li>
<li><p><a class="reference internal" href="#core-platform" id="id4">Core Platform</a></p></li>
<li><p><a class="reference internal" href="#gis-utilities" id="id5">GIS Utilities</a></p></li>
<li><p><a class="reference internal" href="#pipelines" id="id6">Pipelines</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#deployment" id="id7">Deployment</a></p>
<ul>
<li><p><a class="reference internal" href="#using-the-database" id="id8">Using the Database</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#terms-and-acronyms" id="id9">Terms and Acronyms</a></p></li>
<li><p><a class="reference internal" href="#building-platform-documentation" id="id10">Building Platform documentation</a></p></li>
</ul>
</div>
<div class="section" id="introduction-to-data-platform">
<h2><a class="toc-backref" href="#id1">Introduction to Data Platform</a><a class="headerlink" href="#introduction-to-data-platform" title="Permalink to this heading"></a></h2>
<p>This data platform is intended for development and deployment of
ETL/ELT pipelines that includes complex data processing and data
cleansing workflows. Complex workflows require a workflow language,
and we have chosen
<a class="reference external" href="https://www.commonwl.org/">Common Workflow Language (CWL)</a>.
For deployment, we have selected CWL-Airflow to take advantage of the excellent
user interface allowing for the control of the actual execution process.
The data is eventually stored in a PostgreSQL DBMS; many processing steps
in the <a class="reference internal" href="#pipelines"><span class="std std-ref">included data processing pipelines</span></a>
are being run inside the database itself.</p>
<p>The data platform is based on a combination of an
<a class="reference external" href="https://en.wikipedia.org/wiki/Infrastructure_as_code">Infrastructure as Code (IaC) approach</a>
and CWL. Beside tools written in widely used languages such as
Python, C/C++ and
Java, the platform also supports tools written in R and PL/pgSQL.
Data platform consists of several <a class="reference internal" href="packages.html"><span class="doc std std-doc">python packages</span></a>,
a <a class="reference internal" href="#deployment"><span class="std std-doc">package to deploy the platform</span></a>
using <a class="reference external" href="https://cwl-airflow.readthedocs.io/en/latest/">CWL-Airflow</a>
and a number of data ingestion pipelines.
<a class="reference internal" href="#pipelines"><span class="std std-ref">Data ingestion pipelines</span></a>
process data from external sources and load it into the database.</p>
<p>A discussion on what are the aims of this data platform and how reproducible research can benefit from such product is provided in the
<a class="reference internal" href="rationale.html"><span class="doc std std-doc">What is Data Platform</span></a> section.</p>
<p>The data platform is deployed as a set of Docker containers orchestrated by
Docker-Compose. Conda (package manager) environment files and Python
requirements are used to build Docker containers satisfying the dependencies.
Specific parameters can be customized via environment files and shell script
callbacks.</p>
</div>
<div class="section" id="building-blocks">
<h2><a class="toc-backref" href="#id2">Building Blocks</a><a class="headerlink" href="#building-blocks" title="Permalink to this heading"></a></h2>
<p>The building blocks of the data platform are packaged in several repositories:</p>
<ul class="simple">
<li><p>The <strong>NSAPH utilities</strong> repository https://github.com/NSAPH-Data-Platform/nsaph-utils</p></li>
<li><p>The <strong>core platform</strong> repository https://github.com/NSAPH-Data-Platform/nsaph-core-platform</p></li>
<li><p>The <strong>GIS utilities</strong> repository https://github.com/NSAPH-Data-Platform/nsaph-gis</p></li>
<li><p>The <strong>pipeline</strong> repositories. Five pipelines, each focused in a different data domain have been implemented:</p>
<ul>
<li><p>The <strong>cms</strong> repository https://github.com/NSAPH-Data-Platform/nsaph-cms</p></li>
<li><p>The <strong>EPA</strong> repository https://github.com/NSAPH-Data-Platform/nsaph-epa</p></li>
<li><p>The <strong>gridmet</strong> repository https://github.com/NSAPH-Data-Platform/nsaph-gridmet</p></li>
<li><p>The <strong>census</strong> repository https://github.com/NSAPH-Data-Platform/nsaph-census</p></li>
</ul>
</li>
<li><p>The <strong>deployment</strong> repository https://github.com/NSAPH-Data-Platform/nsaph-platform-deployment</p></li>
</ul>
<p>General details of the building blocks are provided next.</p>
<div class="section" id="nsaph-utilities">
<h3><a class="toc-backref" href="#id3">NSAPH Utilities</a><a class="headerlink" href="#nsaph-utilities" title="Permalink to this heading"></a></h3>
<!-- section overview from nsaph_utils -->
<p>The nsaph_utils package is intended to hold python
code that will be useful
across multiple portions of the NSAPH pipelines.</p>
<p>The included utilities are developed to be as independent of
specific infrastructure and execution environment as possible.</p>
<p>Included utilities:</p>
<ul class="simple">
<li><p>Interpolation code</p></li>
<li><p>Reading FST files from Python</p></li>
<li><p>various I/O wrappers</p></li>
<li><p>An API and CLI framework</p></li>
<li><p>QC Framework</p></li>
<li><p>Documentation utilities to simplify creation of consistent
documentation for NSAPH platform</p></li>
</ul>
<!-- end of section overview from nsaph_utils -->
</div>
<div class="section" id="core-platform">
<h3><a class="toc-backref" href="#id4">Core Platform</a><a class="headerlink" href="#core-platform" title="Permalink to this heading"></a></h3>
<!-- section overview from nsaph -->
<p>The data platform provides generic infrastructure for NSAPH Data Platform
It depends on nsaph_util package, but it augments it
with APIs and command line utilities dependent on the infrastructure
and the environment. For instance, its components assume presence of PostgreSQL
DBMS (version 13 or later) and CWL runtime environment.</p>
<p>Some mapping (or crosswalk) tables are also included in the Core
Platform module. These tables include between different
territorial codes, such as USPS ZIP codes, Census ZCTA codes,
FIPS codes for US states
and counties, SSA codes for codes for US states
and counties. See more information in the
<a class="reference external" href="https://nsaph-data-platform.github.io/nsaph-platform-docs/common/core-platform/doc/TerritorialCodes.html">Mapping between different territorial codes</a></p>
<!-- end of section overview from nsaph -->
</div>
<div class="section" id="gis-utilities">
<h3><a class="toc-backref" href="#id5">GIS Utilities</a><a class="headerlink" href="#gis-utilities" title="Permalink to this heading"></a></h3>
<!-- section overview from gis -->
<p>This library contains several packages, aimed to work with census shape files.</p>
<!-- end of section overview from gis -->
</div>
<div class="section" id="pipelines">
<h3><a class="toc-backref" href="#id6">Pipelines</a><a class="headerlink" href="#pipelines" title="Permalink to this heading"></a></h3>
<p>Ingestion and Processing pipelines for the <strong>EPA</strong> Environmental Protection Agency and <strong>gridMET</strong> datasets are ready to be used by any interested party. The pipeline that
processes claims data from Medicaid which cannot be made publicly available can be
tested only by users who have their own data user agreement with the Centers for
Medicare and Medicaid Services <strong>CMS</strong> and have access to their own Medicaid
claims data from ResDAC. The pipeline we publish processes Medicaid MAX (
Medicaid Analytic Extract) Personal Summary (PS) and The Medicaid MAX (Medicaid
Analytic Extract) Inpatient (IP) files. The following table
summarizes the included data processing pipelines. <strong>Census</strong> data is requested via the US Census Bureau data API.</p>
<p>Details of each of the data domains and corresponding pipelines are covered in the <a class="reference internal" href="domains.html"><span class="doc std std-doc">Data Domains</span></a> and <a class="reference internal" href="#pipelines"><span class="std std-ref">Data Processing Pipelines</span></a> sections.</p>
<p>To include additional data in a deployed data-platform instance go to <a class="reference internal" href="adding_data.html"><span class="doc std std-doc">Adding more data</span></a> section.</p>
</div>
</div>
<div class="section" id="deployment">
<h2><a class="toc-backref" href="#id7">Deployment</a><a class="headerlink" href="#deployment" title="Permalink to this heading"></a></h2>
<p>The deployment repository is based on<br />
CWL-Airflow Docker Deployment developed
by Harvard FAS RC in collaboration with Forome Association. Essentially, this is a fork of:
<a class="reference external" href="https://github.com/ForomePlatform/airflow-cwl-docker">Apache Airflow + CWL in Docker with Optional Conda and R</a>
It follows
<a class="reference external" href="https://en.wikipedia.org/wiki/Infrastructure_as_code">Infrastructure as Code (IaC)</a>
approach.</p>
<p>[Harvard FAS RC Superset] repository is a fork of
<a class="reference external" href="https://superset.apache.org/">Apache Superset</a>
customized for Harvard FAS RC environment.</p>
<p>Detailed description of this deployment is covered in the <a class="reference internal" href="common/platform-deployment/doc/index.html"><span class="doc std std-doc">NSAPH Data Platform Deployment</span></a> subsection of the <a class="reference internal" href="guts.html"><span class="doc std std-doc">Data Platform Internals</span></a> section.</p>
<div class="section" id="using-the-database">
<h3><a class="toc-backref" href="#id8">Using the Database</a><a class="headerlink" href="#using-the-database" title="Permalink to this heading"></a></h3>
<p>For a sample to query the database, please look at
<a class="reference internal" href="common/core-platform/doc/SampleQuery.html"><span class="doc std std-doc">Sample Query</span></a></p>
<p>A discussion of querying of health data can be found in
<a class="reference internal" href="common/cms/doc/QueringMedicaid.html"><span class="doc std std-doc">this document</span></a></p>
</div>
</div>
<div class="section" id="terms-and-acronyms">
<h2><a class="toc-backref" href="#id9">Terms and Acronyms</a><a class="headerlink" href="#terms-and-acronyms" title="Permalink to this heading"></a></h2>
<p>Included
<a class="reference internal" href="glossary.html"><span class="doc std std-doc">Glossary</span></a> provides some information about
acronyms and other terms used throughout this documentation.</p>
<p>Additionaly, <a class="reference internal" href="genindex.html"><span class="std std-ref">General Index</span></a> and <a class="reference internal" href="py-modindex.html"><span class="std std-ref">Python Module Index</span></a> englobe all the pieces of the Data Platform together.</p>
</div>
<div class="section" id="building-platform-documentation">
<h2><a class="toc-backref" href="#id10">Building Platform documentation</a><a class="headerlink" href="#building-platform-documentation" title="Permalink to this heading"></a></h2>
<p>The <a class="reference external" href="https://github.com/NSAPH-Data-Platform/nsaph-platform-docs">documentation</a>
contains general documentation pages in
<a class="reference external" href="https://www.markdownguide.org/">MarkDown</a>
format and a build script that goes over all other platform
repositories in the platform
and creates a combined <a class="reference external" href="https://pages.github.com/">GitHub Pages</a> site.
The script supports links between repositories. The
<a class="reference external" href="https://github.com/NSAPH-Data-Platform/nsaph-platform-docs/blob/main/README.md">README.md</a> file contains
Build instructions.</p>
<p>To integrate Markdown with <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a>
processing we use <a class="reference external" href="https://jupyterbook.org/en/stable/content/myst.html">MyST Parser</a>.</p>
<p>Documentation utilities are contained in
<a class="reference external" href="https://github.com/NSAPH-Data-Platform/nsaph-utils">nsaph-utils</a>
in
<a class="reference external" href="https://github.com/NSAPH-Data-Platform/nsaph-utils/tree/master/nsaph_utils/docutils">docutils</a>
package.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="NSAPH Data Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rationale.html" class="btn btn-neutral float-right" title="Why Data Platform and what does it do?" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Harvard University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>