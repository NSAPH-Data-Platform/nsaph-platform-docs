<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NSAPH Data Platform &mdash; NSAPH Data Platform 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/sphinx_paramlinks.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="NSAPH Data Platform" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> NSAPH Data Platform
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">NSAPH Data Platform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-database">Using the Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#glossary">Glossary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#deploying-the-platform">Deploying the Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-platform-documentation">Building Platform documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#repositories-overview">Repositories Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#deployment">Deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#general-packages">General Packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#nsaph-utilities">NSAPH Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#core-platform">Core Platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gis-utilities">GIS Utilities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-ingestion-and-processing-packages-and-pipelines">Data Ingestion and Processing Packages and Pipelines</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NSAPH Data Platform</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>NSAPH Data Platform</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/home.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nsaph-data-platform">
<h1>NSAPH Data Platform<a class="headerlink" href="#nsaph-data-platform" title="Permalink to this headline"></a></h1>
<p><strong>User and Development Documentation</strong></p>
<!-- toc --><!--TOC--><ul class="simple">
<li><p><a class="reference external" href="#introduction">Introduction</a></p>
<ul>
<li><p><a class="reference external" href="#overview">Overview</a></p></li>
<li><p><a class="reference external" href="#using-the-database">Using the Database</a></p></li>
<li><p><a class="reference external" href="#glossary">Glossary</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#deploying-the-platform">Deploying the Platform</a></p></li>
<li><p><a class="reference external" href="#building-platform-documentation">Building Platform documentation</a></p></li>
<li><p><a class="reference external" href="#repositories-overview">Repositories Overview</a></p>
<ul>
<li><p><a class="reference external" href="#deployment">Deployment</a></p></li>
<li><p><a class="reference external" href="#general-packages">General Packages</a></p></li>
<li><p><a class="reference external" href="#data-ingestion-and-processing-packages-and-pipelines">Data Ingestion and Processing Packages and Pipelines</a></p></li>
</ul>
</li>
</ul>
<!--TOC--><!-- tocstop --><section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h3>
<p>This data platform is intended for development and deployment of
ETL/ELT pipelines that includes complex data processing and data
cleansing workflows. Complex workflows require a workflow language,
and we have chosen
<a class="reference external" href="https://www.commonwl.org/">Common Workflow Language (CWL)</a>.
For deployment, we have selected CWL-Airflow to take advantage of the excellent
user interface allowing for the control of the actual execution process.
The
data is eventually stored in a PostgreSQL DBMS; many processing steps
in the
<a class="reference external" href="#data-ingestion-and-processing-pipelines">included data processing pipelines</a>
are being
run inside the database itself.</p>
<p>The data platform is based on a combination of an
<a class="reference external" href="https://en.wikipedia.org/wiki/Infrastructure_as_code">Infrastructure as Code (IaC) approach</a>
and CWL. Beside tools written in widely used languages such as
Python, C/C++ and
Java, the platform also supports tools written in R and PL/pgSQL.
Data platform consists of
several <a class="reference external" href="#general-packages">general packages</a>,
a <a class="reference external" href="#deploying-the-platform">package to deploy the platform</a>
using
<a class="reference external" href="https://cwl-airflow.readthedocs.io/en/latest/">CWL-Airflow</a>
and a number of data ingestion pipelines.
<a class="reference external" href="#data-ingestion-and-processing-pipelines">Data ingestion pipelines</a>
process data from external sources and load it into the database.</p>
</section>
<section id="using-the-database">
<h3>Using the Database<a class="headerlink" href="#using-the-database" title="Permalink to this headline"></a></h3>
<p>For a sample to query the database, please look at
<a class="reference external" href="core-platform/doc/SampleQuery.html">Sample Query</a></p>
<p>A discussion of querying of health data can be found in
<a class="reference external" href="pipelines/cms/doc/QueringMedicaid.html">this document</a></p>
</section>
<section id="glossary">
<h3>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline"></a></h3>
<p>Included
<a class="reference internal" href="glossary.html"><span class="doc">Glossary</span></a> provides some information about
acronyms and other terms used throughout this documentation.</p>
</section>
</section>
<section id="deploying-the-platform">
<h2>Deploying the Platform<a class="headerlink" href="#deploying-the-platform" title="Permalink to this headline"></a></h2>
<p>The data platform is deployed as a set of Docker containers orchestrated by
Docker-Compose. Conda (package manager) environment files and Python
requirements are used to build Docker containers satisfying the dependencies.
Specific parameters can be customized via environment files and shell script
callbacks.</p>
</section>
<section id="building-platform-documentation">
<h2>Building Platform documentation<a class="headerlink" href="#building-platform-documentation" title="Permalink to this headline"></a></h2>
<p>A build script goes over all repositories in the platform
and creates a combined <a class="reference external" href="https://pages.github.com/">GitHub Pages</a> site.</p>
<p>See <a class="reference external" href="#deployment">deployment</a> section.</p>
</section>
<section id="repositories-overview">
<h2>Repositories Overview<a class="headerlink" href="#repositories-overview" title="Permalink to this headline"></a></h2>
<section id="deployment">
<h3>Deployment<a class="headerlink" href="#deployment" title="Permalink to this headline"></a></h3>
<p><a class="reference internal" href="#deployment"><span class="std std-ref">Deployment repository</span></a> is based on<br />CWL-Airflow Docker Deployment developed
by Harvard FAS RC in collaboration with Forome Association. Essentially, this is a fork of:
<a class="reference external" href="https://github.com/ForomePlatform/airflow-cwl-docker">Apache Airflow + CWL in Docker with Optional Conda and R</a>
It follows
<a class="reference external" href="https://en.wikipedia.org/wiki/Infrastructure_as_code">Infrastructure as Code (IaC)</a>
approach.</p>
<p>[Harvard FAS RC Superset] repository is a fork of
<a class="reference external" href="https://superset.apache.org/">Apache Superset</a>
customized for Harvard FAS RC environment.</p>
</section>
<section id="general-packages">
<h3>General Packages<a class="headerlink" href="#general-packages" title="Permalink to this headline"></a></h3>
<section id="nsaph-utilities">
<h4>NSAPH Utilities<a class="headerlink" href="#nsaph-utilities" title="Permalink to this headline"></a></h4>
<!-- section overview from nsaph_utils --><p>The nsaph_utils package is intended to hold python
code that will be useful
across multiple portions of the NSAPH pipelines.</p>
<p>The included utilities are developed to be as independent of
specific infrastructure and execution environment as possible.</p>
<p>Included utilities:</p>
<ul class="simple">
<li><p>Interpolation code</p></li>
<li><p>Reading FST files from Python</p></li>
<li><p>various I/O wrappers</p></li>
<li><p>An API and CLI framework</p></li>
<li><p>QC Framework</p></li>
<li><p>Documentation utilities to simplify creation of consistent
documentation for NSAPH platform</p></li>
</ul>
<!-- end of section overview from nsaph_utils --><p><a class="reference external" href="utils">Package Description</a></p>
</section>
<section id="core-platform">
<h4>Core Platform<a class="headerlink" href="#core-platform" title="Permalink to this headline"></a></h4>
<!-- section overview from nsaph --><p>The data platform provides generic infrastructure for NSAPH Data Platform
It depends on nsaph_util package, but it augments it
with APIs and command line utilities dependent on the infrastructure
and the environment. For instance, its components assume presence of PostgreSQL
DBMS (version 13 or later) and CWL runtime environment.</p>
<p>The package is under intensive development, therefore its
development branches contain some obsolete modules and utilities.
The project structure can also be in flux.</p>
<!-- end of section overview from nsaph --><p><a class="reference external" href="core-platform">Package Description</a></p>
</section>
<section id="gis-utilities">
<h4>GIS Utilities<a class="headerlink" href="#gis-utilities" title="Permalink to this headline"></a></h4>
<!-- section overview from gis --><p>This library contains several packages, aimed to work with census shape files.</p>
<!-- end of section overview from gis --><p><a class="reference external" href="gis">Package Description</a></p>
</section>
</section>
<section id="data-ingestion-and-processing-packages-and-pipelines">
<h3>Data Ingestion and Processing Packages and Pipelines<a class="headerlink" href="#data-ingestion-and-processing-packages-and-pipelines" title="Permalink to this headline"></a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>Pipeline</th>
<th>Documentation</th>
</tr>
</thead>
<tbody>
<tr>
<td>EPA</td>
<td><a href="pipelines/epa/README.html">EPA Pipelines</a></td>
</tr>
<tr>
<td>Census</td>
<td><a href="pipelines/census/README.html">Census Package</a></td>
</tr>
<tr>
<td>Gridmet</td>
<td><a href="pipelines/gridmet/README.html">Gridmet package</a></td>
</tr>
<tr>
<td>CMS</td>
<td><a href="pipelines/cms/README.html">Medicaid Piepline</a></td>
</tr>
</tbody>
</table></section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="NSAPH Data Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Harvard University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>